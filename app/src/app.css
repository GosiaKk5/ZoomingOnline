@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom component classes using Tailwind */
@layer components {
  /* Button Components */
  .btn {
    @apply inline-flex items-center gap-2 px-4 py-2 font-medium rounded-md transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply btn bg-primary text-white hover:bg-primary-hover disabled:bg-gray-400;
  }

  .btn-secondary {
    @apply btn bg-secondary text-white hover:bg-secondary-hover;
  }

  .btn-success {
    @apply btn bg-success text-white hover:bg-success-hover;
  }

  .btn-link {
    @apply btn bg-transparent text-primary underline hover:text-primary-hover hover:bg-transparent p-0 disabled:text-gray-400 disabled:no-underline;
  }

  .btn-close {
    @apply btn bg-transparent text-gray-500 hover:bg-gray-100 hover:text-gray-800 p-2 rounded-md;
  }

  .btn-sm {
    @apply btn px-3 py-1.5 text-sm;
  }

  /* Form Components */
  .form-control {
    @apply w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors;
  }

  /* Card Components */
  .card {
    @apply bg-white rounded-lg shadow-md p-4 mb-4;
  }

  .card-header {
    @apply flex items-center justify-between p-6 border-b border-gray-200;
  }

  .card-body {
    @apply p-6;
  }

  /* Container Components */
  .container-center {
    @apply bg-white p-4 rounded-lg shadow-md text-center mb-4;
  }

  /* Input Groups */
  .input-group {
    @apply flex gap-2 justify-center items-center flex-wrap;
  }

  /* Loading States */
  .loading {
    @apply text-blue-600 animate-pulse;
  }

  /* Example Hints */
  .example-hint {
    @apply my-2 p-3 bg-gray-50 border border-gray-200 rounded text-sm text-gray-600;
  }

  /* Selection Info */
  .selection-info {
    @apply flex items-center gap-2 text-sm text-gray-600;
  }

  /* Modal Components */
  .modal-backdrop {
    @apply fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-8;
  }

  .modal-content {
    @apply bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden;
  }

  .modal-header {
    @apply flex items-center justify-between p-6 border-b border-gray-200;
  }

  .modal-title {
    @apply text-xl font-semibold text-gray-800 m-0;
  }

  .modal-body {
    @apply p-6;
  }
}

/* Keep chart-specific styles that aren't easily replaceable with Tailwind */
@layer base {
  :root {
    font-family:
      -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial,
      sans-serif;
    line-height: 1.5;
    font-weight: 400;
    color-scheme: light;
    color: #333;
    background-color: #f8f9fa;
    font-synthesis: none;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-text-size-adjust: 100%;
  }

  * {
    box-sizing: border-box;
  }

  body {
    @apply m-0 flex items-center min-w-80 min-h-screen;
  }

  #app {
    @apply w-full max-w-screen-xl mx-auto text-center;
  }
}

/* Zoom rectangle styles for interactive overview chart */
@layer components {
  .zoom-rect {
    fill: rgba(239, 68, 68, 0.2); /* Semi-transparent red */
    stroke: #dc2626; /* Red border */
    stroke-width: 2px;
    stroke-dasharray: 5, 5; /* Dashed border */
    cursor: move;
    pointer-events: all;
    transition: fill 0.2s, stroke-width 0.2s;
  }

  .zoom-rect:hover {
    fill: rgba(239, 68, 68, 0.3); /* Slightly more opaque on hover */
    stroke-width: 2.5px;
  }

  .zoom-rect.dragging {
    fill: rgba(239, 68, 68, 0.4); /* More opaque when dragging */
    stroke-width: 3px;
  }

  /* Extended grabbable area for small rectangles */
  .zoom-rect-hit-area {
    fill: transparent;
    cursor: move;
    pointer-events: all;
  }

  /* Optional: Visual debug outline for hit areas (can be enabled for testing) */
  .zoom-rect-hit-area.debug {
    fill: rgba(255, 255, 0, 0.1);
    stroke: yellow;
    stroke-width: 1px;
    stroke-dasharray: 2, 2;
  }
}

/* Responsive modal adjustments */
@layer utilities {
  @media (max-width: 768px) {
    .modal-backdrop {
      @apply p-4;
    }

    .modal-content {
      @apply m-0 rounded-lg;
    }

    .modal-header,
    .modal-body {
      @apply p-4;
    }
  }
}
