@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom component classes using Tailwind */
@layer components {
  /* Button Components */
  .btn {
    @apply inline-flex items-center gap-2 px-4 py-2 font-medium rounded-md transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply btn bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400;
  }

  .btn-secondary {
    @apply btn bg-gray-500 text-white hover:bg-gray-600;
  }

  .btn-success {
    @apply btn bg-emerald-500 text-white hover:bg-emerald-600;
  }

  .btn-link {
    @apply btn bg-transparent text-blue-600 underline hover:text-blue-700 hover:bg-transparent p-0 disabled:text-gray-400 disabled:no-underline;
  }

  .btn-close {
    @apply btn bg-transparent text-gray-500 hover:bg-gray-100 hover:text-gray-800 p-2 rounded-md;
  }

  .btn-sm {
    @apply btn px-3 py-1.5 text-sm;
  }

  /* Form Components */
  .form-control {
    @apply w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors;
  }

  .form-select {
    @apply px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200;
  }

  /* Zoom Button Components */
  .zoom-btn {
    @apply flex items-center gap-1 px-3 py-1.5 text-white border-0 rounded-md cursor-pointer transition-all duration-200 text-xs font-medium flex-1 hover:transform hover:-translate-y-0.5 disabled:transform-none disabled:bg-gray-400 disabled:cursor-not-allowed disabled:opacity-60 active:translate-y-0;
  }

  .zoom-btn-in {
    @apply zoom-btn bg-emerald-500 hover:bg-emerald-600;
  }

  .zoom-btn-out {
    @apply zoom-btn bg-amber-500 hover:bg-amber-600;
  }

  /* Responsive zoom button adjustments */
  @media (max-width: 640px) {
    .zoom-btn {
      @apply px-2 py-1 text-[10px];
    }
  }

  /* Modal Components */
  .modal-backdrop {
    @apply fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-8;
  }

  .modal-content {
    @apply bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden;
  }

  .modal-header {
    @apply flex items-center justify-between p-6 border-b border-gray-200;
  }

  .modal-title {
    @apply text-xl font-semibold text-gray-800 m-0;
  }

  .modal-body {
    @apply p-6;
  }
}

/* Keep chart-specific styles that aren't easily replaceable with Tailwind */
@layer base {
  :root {
    font-family:
      -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial,
      sans-serif;
    line-height: 1.5;
    font-weight: 400;
    color-scheme: light;
    color: theme(colors.gray.800);
    background-color: theme(colors.gray.50);
    font-synthesis: none;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-text-size-adjust: 100%;
  }

  * {
    box-sizing: border-box;
  }

  body {
    @apply m-0 p-8 flex justify-center items-start min-w-80 min-h-screen bg-gray-50 md:p-4;
  }

  #app {
    @apply w-full max-w-6xl mx-auto;
  }
}

/* Zoom rectangle styles for interactive overview chart */
@layer components {
  .zoom-rect {
    fill: theme(colors.red.500 / 0.2); /* Semi-transparent red */
    stroke: theme(colors.red.600); /* Red border */
    stroke-width: 2px;
    stroke-dasharray: 5, 5; /* Dashed border */
    cursor: move;
    pointer-events: all;
    transition: fill 0.2s, stroke-width 0.2s;
  }

  .zoom-rect:hover {
    fill: theme(colors.red.500 / 0.3); /* Slightly more opaque on hover */
    stroke-width: 2.5px;
  }

  .zoom-rect.dragging {
    fill: theme(colors.red.500 / 0.4); /* More opaque when dragging */
    stroke-width: 3px;
  }

  /* Extended grabbable area for small rectangles */
  .zoom-rect-hit-area {
    fill: transparent;
    cursor: move;
    pointer-events: all;
  }

  /* Optional: Visual debug outline for hit areas (can be enabled for testing) */
  .zoom-rect-hit-area.debug {
    fill: rgba(255, 255, 0, 0.1);
    stroke: yellow;
    stroke-width: 1px;
    stroke-dasharray: 2, 2;
  }
}

/* Responsive modal adjustments */
@layer utilities {
  @media (max-width: 768px) {
    .modal-backdrop {
      @apply p-4;
    }

    .modal-content {
      @apply m-0 rounded-lg;
    }

    .modal-header,
    .modal-body {
      @apply p-4;
    }
  }
}
